/* === Layout & Panel Styles === */
@layer components {

    /* App Container & Hero */
    .app {
        @apply min-h-screen px-8 pb-8 pt-2 max-w-7xl mx-auto;
    }

    /* Grid Layout */
    .main-grid {
        display: grid;
        gap: 1.5rem;
        grid-template-columns: 320px 1fr;
    }

    /* Panels (Modern Sleek Glassmorphism) */
    .panel {
        background: var(--glass-bg);
        backdrop-filter: blur(var(--glass-blur));
        -webkit-backdrop-filter: blur(var(--glass-blur));
        @apply rounded-2xl p-6 shadow-2xl border border-white/40 flex flex-col relative overflow-hidden transition-all;
        box-shadow: var(--glass-shadow);
        border: 1px solid var(--glass-border);
    }

    .panel-left {
        @apply border-r shadow-none p-5;
        border-color: var(--glass-border);
        background: var(--bg-sidebar);
        backdrop-filter: blur(var(--glass-blur));
        height: calc(100vh - 4rem);
    }

    .panel-right {
        @apply gap-4 p-6;
        background: var(--glass-bg);
        backdrop-filter: blur(var(--glass-blur));
        height: calc(100vh - 4rem);
    }

    /* Panel Header Titles */
    .panel-header {
        @apply mb-0 pb-1 border-b border-slate-200;
    }

    .panel-header h2 {
        @apply text-lg font-extrabold text-slate-800 tracking-tight;
    }

    .panel-header p {
        @apply text-xs text-slate-500 mt-1 font-medium;
    }

    /* Pills */
    .pill {
        @apply inline-block px-2 py-0.5 rounded-full bg-slate-100 text-slate-500 text-xs font-medium;
    }

    .mini-status {
        @apply flex items-center gap-2 px-3 py-1.5 rounded-full bg-slate-50 border border-slate-200;
        @apply w-full max-w-[240px] md:max-w-[320px] transition-all duration-300;
    }

    .mini-status.is-error {
        @apply bg-rose-50 border-rose-200 text-rose-600;
    }

    .mini-status.is-error .dot {
        @apply bg-rose-500 shadow-sm shadow-rose-500/50;
        animation: ping 1.5s cubic-bezier(0, 0, 0.2, 1) infinite;
    }

    .status-text {
        @apply text-xs font-medium truncate whitespace-nowrap overflow-hidden;
    }

    /* Pulse Blue Anim */
    .pulse-blue {
        @apply w-1.5 h-1.5 rounded-full bg-blue-500;
        animation: pulse-blue-dot 2s infinite;
    }

    @keyframes pulse-blue-dot {
        0% {
            transform: scale(0.95);
            opacity: 0.8;
        }

        50% {
            transform: scale(1.2);
            opacity: 1;
        }

        100% {
            transform: scale(0.95);
            opacity: 0.8;
        }
    }

    /* Block Meta */
    .block-meta {
        @apply flex items-center gap-2 border-b border-slate-200 bg-slate-50/50 text-[11px] text-slate-500 font-medium;
        @apply p-0 pb-1.5 mb-2;
    }

    .btn-tool {
        @apply flex items-center gap-1.5 px-2 py-0.5 rounded-md border border-transparent;
        @apply bg-transparent text-slate-500 transition-all duration-200 cursor-pointer;
        @apply hover:bg-white hover:border-slate-300 hover:text-blue-600 hover:shadow-sm;
    }

    .btn-tool .icon {
        @apply text-sm opacity-80;
    }

    .status-pill {
        @apply inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-blue-50 text-blue-600 text-xs font-medium;
    }

    .status-pill.is-running {
        @apply bg-amber-50 text-amber-600;
    }

    /* Block List */
    .block-list {
        @apply flex flex-col gap-3;
    }

    /* Block Cards (Compact Header) */
    .block-card {
        @apply bg-white border border-slate-300 rounded-lg p-3 flex flex-col gap-2 shadow-sm hover:shadow-md hover:border-blue-400/50 transition-all duration-200;
        height: auto;
    }

    .block-body {
        @apply grid grid-cols-2 gap-3;
        height: auto;
    }

    .slide-canvas {
        @apply rounded-sm shadow-lg ring-1 ring-slate-200/50;
    }

    /* Textarea & Readonly Box */
    .textarea,
    .readonly-box {
        @apply w-full p-3 rounded-lg border border-slate-200 bg-slate-50 text-sm text-slate-700;
        @apply transition-all duration-200;
        min-height: 50px;
        line-height: 1.5;
    }

    .readonly-box {
        @apply bg-slate-100/50 text-slate-500 cursor-default;
        border-style: dashed;
    }

    .textarea:focus {
        @apply bg-white border-blue-400 ring-2 ring-blue-100;
    }

    /* Select Input Compact */
    .select-input {
        @apply px-2 py-1 text-[11px] rounded-md border border-slate-200 bg-white text-slate-600 outline-none;
        @apply focus:border-blue-400 focus:ring-1 focus:ring-blue-100 transition-all;
        min-height: 24px;
    }

    /* Filter Row Compact */
    .filter-row {
        @apply flex gap-2 items-center flex-wrap py-0.5 border-b border-transparent;
    }

    .filter-item {
        @apply flex flex-row items-center gap-1.5;
    }

    .filter-item .field-label {
        @apply m-0 text-[11px] text-slate-500 whitespace-nowrap font-medium;
    }

    /* Action Row */
    .action-row {
        @apply flex gap-2 flex-wrap items-center py-0 mb-1;
    }

    /* Token Stats Component */
    .token-stats {
        @apply relative;
    }

    .token-stats-toggle {
        @apply flex items-center gap-2 px-3 py-1.5 bg-slate-100 hover:bg-slate-200 rounded-md text-sm font-medium transition-colors cursor-pointer border-none;
    }

    .token-icon {
        @apply text-base;
    }

    .token-count {
        @apply text-slate-700;
    }

    .token-cost {
        @apply text-emerald-600 font-semibold;
    }

    .token-stats-dropdown {
        @apply absolute top-full right-0 mt-2 w-72 bg-white rounded-xl shadow-2xl border border-slate-200 z-50 overflow-hidden;
    }

    .token-stats-header {
        @apply flex justify-between items-center px-4 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white;
    }

    .token-stats-header h4 {
        @apply font-bold text-sm;
    }

    .token-stats-header .close-btn {
        @apply w-6 h-6 flex items-center justify-center text-white/80 hover:text-white hover:bg-white/20 rounded-full cursor-pointer border-none bg-transparent;
    }

    .token-stats-section {
        @apply px-4 py-3 border-b border-slate-100 last:border-b-0;
    }

    .token-stats-section h5 {
        @apply text-xs font-semibold text-slate-500 mb-2;
    }

    .stats-grid {
        @apply grid grid-cols-2 gap-2;
    }

    .stat-item {
        @apply flex flex-col;
    }

    .stat-label {
        @apply text-xs text-slate-400;
    }

    .stat-value {
        @apply text-lg font-bold text-slate-700;
    }

    .stat-value.highlight {
        @apply text-indigo-600;
    }

    .stat-value.cost {
        @apply text-emerald-600;
    }

    .stat-hint {
        @apply text-xs text-slate-400 mt-2;
    }

    .stats-row {
        @apply flex justify-between text-sm text-slate-600;
    }

    .model-tags {
        @apply flex flex-wrap gap-1;
    }

    .model-tag {
        @apply px-2 py-0.5 bg-slate-100 text-slate-600 text-xs rounded-full;
    }

    /* --- Block Card Animations & Premium --- */
    .block-card.is-translating {
        @apply border-blue-400/50 shadow-lg shadow-blue-500/10;
        position: relative;
        overflow: hidden;
    }

    .block-card.is-translating::after {
        content: "";
        @apply absolute inset-0;
        background: linear-gradient(90deg,
                transparent,
                rgba(255, 255, 255, 0.4),
                transparent);
        transform: translateX(-100%);
        animation: shimmer 2.5s infinite;
    }

    .block-card.is-bilingual {
        @apply border-l-4 border-l-indigo-500 bg-indigo-50/10;
    }

    @keyframes shimmer {
        100% {
            transform: translateX(100%);
        }
    }

    /* Step Indicators */
    .step-number {
        @apply flex items-center justify-center w-6 h-6 rounded-full text-[11px] font-bold;
        background-color: var(--state-pending-bg);
        color: var(--state-pending-text);
        transition: all var(--transition-base);
    }

    .step-number.is-active {
        background-color: var(--state-active-bg);
        color: var(--state-active-text);
        box-shadow: 0 0 0 2px var(--state-active-bg);
    }

    .step-number.is-done {
        background-color: var(--state-done-bg);
        color: var(--state-done-text);
    }

    .accordion-section {
        @apply border-b border-transparent transition-all;
    }

    .accordion-section.is-done {
        /* Optional: distinct border or background for completed sections */
    }
}

/* --- Animations --- */
.animate-in {
    animation-duration: 250ms;
    animation-fill-mode: forwards;
}

.fade-in {
    animation-name: fade-in;
}

.zoom-in-95 {
    animation-name: zoom-in-95;
}

.slide-in-from-top-2 {
    animation-name: slide-in-from-top-2;
}

@keyframes fade-in {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

@keyframes zoom-in-95 {
    from {
        transform: scale(0.95);
        opacity: 0.5;
    }

    to {
        transform: scale(1);
        opacity: 1;
    }
}

@keyframes slide-in-from-top-2 {
    from {
        transform: translateY(-0.5rem);
    }

    to {
        transform: translateY(0);
    }
}

/* Empty State V2 */
.empty-state-v2 {
    @apply bg-white/40 backdrop-blur-sm rounded-[2rem] border border-white;
}