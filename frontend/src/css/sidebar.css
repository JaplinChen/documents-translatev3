/* === Sidebar & Stepper Styles === */
@layer components {

    /* === Sidebar Stepper (Compact & Premium) === */
    .sidebar-stepper {
        @apply w-full mb-1 mt-1;
    }

    .premium-stepper {
        @apply flex items-center justify-between relative px-2;
    }

    .stepper-node {
        @apply relative z-10 flex flex-col items-center gap-1;
    }

    .node-wrapper {
        @apply flex flex-col items-center;
    }

    .node-dot {
        @apply w-6 h-6 flex items-center justify-center rounded-full bg-slate-100 text-[10px] font-bold text-slate-400 border border-slate-200 transition-all duration-300;
    }

    .node-content {
        @apply hidden;
        /* Hide labels in compact sidebar stepper */
    }

    /* Active/Done States */
    .stepper-node.is-done .node-dot {
        @apply bg-blue-100 text-blue-600 border-blue-200;
    }

    .stepper-node.is-current .node-dot {
        @apply bg-blue-600 text-white border-blue-600 shadow-lg shadow-blue-500/30 scale-110;
    }

    /* Connector Bars */
    .stepper-connector {
        @apply flex-1 h-[2px] bg-slate-100 mx-1 mb-0 self-center relative -top-[0px];
    }

    .stepper-connector.is-active .connector-bar {
        @apply w-full h-full bg-blue-200;
    }

    /* Pulse Animation */
    .node-pulse {
        @apply absolute inset-0 rounded-full bg-blue-500 -z-10 opacity-75;
        animation: pulse-ring 2s cubic-bezier(0.2, 0, 0, 1) infinite;
    }

    @keyframes pulse-ring {
        0% {
            transform: scale(0.8);
            opacity: 0.5;
        }

        100% {
            transform: scale(2);
            opacity: 0;
        }
    }

    /* Accordion Styles */
    .accordion-section {
        @apply border border-transparent last:border-b-0 py-1 transition-all duration-300 rounded-xl mb-1 relative;
        background: rgba(255, 255, 255, 0.2);
    }

    .accordion-section::after {
        content: none;
    }

    .accordion-section.is-open {
        @apply shadow-xl shadow-slate-300/40 py-3;
        background: rgba(255, 255, 255, 0.8);
        backdrop-filter: blur(8px);
        border: 1px solid var(--glass-border);
        border-left: 3px solid var(--accent);
    }

    .accordion-section.is-done:not(.is-open) {
        @apply border-transparent;
        background: rgba(37, 99, 235, 0.03);
    }

    .accordion-header {
        @apply flex items-center justify-between w-full px-4 py-2.5 text-left font-bold text-slate-500 hover:bg-white/40 hover:text-blue-600 transition-all cursor-pointer rounded-lg;
    }

    .is-open .accordion-header {
        @apply text-slate-900 text-sm tracking-tight;
    }

    .is-done .accordion-header {
        @apply text-blue-600/80;
    }

    .accordion-content {
        @apply overflow-hidden transition-all duration-300 ease-in-out px-4;
    }

    .accordion-content-step1 {
        max-height: 0;
        opacity: 0;
    }

    .accordion-content-step1.is-open {
        max-height: 500px;
        opacity: 1;
    }

    .accordion-content-step2 {
        max-height: 0;
        opacity: 0;
    }

    .accordion-content-step2.is-open {
        max-height: 800px;
        opacity: 1;
    }

    .accordion-content-step3 {
        max-height: 0;
        opacity: 0;
    }

    .accordion-content-step3.is-open {
        max-height: 400px;
        opacity: 1;
    }

    .accordion-content-step4 {
        max-height: 0;
        opacity: 0;
    }

    .accordion-content-step4.is-open {
        max-height: 400px;
        opacity: 1;
    }

    .accordion-indicator {
        @apply text-slate-300 transition-transform duration-300;
    }

    .is-open .accordion-indicator {
        @apply transform rotate-180 text-blue-500;
    }

    .ai-settings-panel {
        @apply bg-blue-50/40 border border-blue-100/50 rounded-2xl p-4 mt-1 transition-all duration-300;
    }

    .sidebar-scrollable-content {
        @apply flex-1 overflow-y-auto flex flex-col gap-3 mt-4 pr-1;
        scrollbar-width: thin;
        scrollbar-color: rgba(0, 0, 0, 0.1) transparent;
    }

    .sidebar-scrollable-content::-webkit-scrollbar {
        width: 4px;
    }

    .sidebar-scrollable-content::-webkit-scrollbar-track {
        background: transparent;
    }

    .sidebar-scrollable-content::-webkit-scrollbar-thumb {
        background-color: rgba(0, 0, 0, 0.1);
        border-radius: 20px;
    }

    .sidebar-scrollable-content:hover::-webkit-scrollbar-thumb {
        background-color: rgba(0, 0, 0, 0.2);
    }
}
